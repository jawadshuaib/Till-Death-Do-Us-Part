{"remainingRequest":"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/babel-loader/lib/index.js!/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/src/components/TransactionDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/src/components/TransactionDetails.vue","mtime":1552342490000},{"path":"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/jawadshuaib/Desktop/js/vue-projects/till-death-do-us-part-v2/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Header from \"./Header.vue\";\nimport commonHelpers from \"@/helpers/common\";\nimport blockchainHelpers from \"@/helpers/blockchain\";\nimport web3 from \"./../web3\";\nimport notesContract from \"./../notes\";\nexport default {\n  name: \"TransactionDetails\",\n  data: function data() {\n    return {\n      url: {\n        etherscan: \"\",\n        note: \"\"\n      },\n      contract: {\n        transactionID: this.$route.params.transaction_id,\n        token: this.$route.params.token,\n        secretKey: this.$route.params.secretKey,\n        whichNetwork: this.$route.params.whichNetwork,\n        note: \"\"\n      }\n    };\n  },\n  components: {\n    Header: Header\n  },\n  watch: {\n    $route: \"updateURLParams\"\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var hostName;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (typeof this.contract.secretKey === \"undefined\") {\n                this.$router.push({\n                  name: \"TextForm\"\n                });\n              }\n\n              if (this.contract.whichNetwork === \"mainnet\") {\n                this.url.etherscan = \"https://etherscan.io/tx/\" + String(this.contract.transactionID);\n              } else {\n                this.url.etherscan = \"https://\" + this.contract.whichNetwork + \".etherscan.io/tx/\" + String(this.contract.transactionID);\n              }\n\n              hostName = window.location.hostname; // https://till-death-do-us-part.firebaseapp.com\n\n              this.url.note = \"\".concat(hostName, \"/note/\").concat(this.contract.token, \"/\").concat(this.contract.whichNetwork);\n              _context.next = 6;\n              return notesContract.methods.owner().call();\n\n            case 6:\n              this.contract.owner = _context.sent;\n              this.getNote();\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  methods: {\n    visitNotePage: function visitNotePage() {\n      this.$router.push({\n        name: \"Note\",\n        params: {\n          token: this.form.token,\n          whichNetwork: this.whichNetwork\n        }\n      });\n    },\n    updateURLParams: function updateURLParams() {\n      this.transactionID = this.$route.params.transaction_id;\n      this.token = this.$route.params.token;\n    },\n    // async getTransactionReceipt() {\n    //   const trans = await web3.eth.getTransactionReceipt(\n    //     this.contract.transactionID\n    //   );\n    // },\n    getNote: function () {\n      var _getNote = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var shouldGetNote, c;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                shouldGetNote = false;\n\n                if (this.contract.token !== \"\") {\n                  shouldGetNote = true;\n                }\n\n                if (shouldGetNote) {\n                  if (blockchainHelpers.doesTokenExist(this.contract.token)) {\n                    shouldGetNote = true;\n                  } else {\n                    shouldGetNote = false;\n                  }\n                }\n\n                if (!shouldGetNote) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 6;\n                return notesContract.methods.getNote(this.contract.token).call();\n\n              case 6:\n                c = _context2.sent;\n                this.contract.note = c[1];\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getNote() {\n        return _getNote.apply(this, arguments);\n      }\n\n      return getNote;\n    }()\n  }\n};",{"version":3,"sources":["TransactionDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,MAAA,MAAA,cAAA;AACA,OAAA,aAAA,MAAA,kBAAA;AACA,OAAA,iBAAA,MAAA,sBAAA;AAEA,OAAA,IAAA,MAAA,WAAA;AACA,OAAA,aAAA,MAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,GAAA,EAAA;AACA,QAAA,SAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAFA,OADA;AAKA,MAAA,QAAA,EAAA;AACA,QAAA,aAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,cADA;AAEA,QAAA,KAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,KAFA;AAGA,QAAA,SAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,SAHA;AAIA,QAAA,YAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,YAJA;AAKA,QAAA,IAAA,EAAA;AALA;AALA,KAAA;AAaA,GAhBA;AAiBA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAjBA;AAoBA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GApBA;AAuBA,EAAA,OAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA,kBAAA,OAAA,KAAA,QAAA,CAAA,SAAA,KAAA,WAAA,EAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA;AACA,kBAAA,IAAA,EAAA;AADA,iBAAA;AAGA;;AAEA,kBAAA,KAAA,QAAA,CAAA,YAAA,KAAA,SAAA,EAAA;AACA,qBAAA,GAAA,CAAA,SAAA,GACA,6BAAA,MAAA,CAAA,KAAA,QAAA,CAAA,aAAA,CADA;AAEA,eAHA,MAGA;AACA,qBAAA,GAAA,CAAA,SAAA,GACA,aACA,KAAA,QAAA,CAAA,YADA,GAEA,mBAFA,GAGA,MAAA,CAAA,KAAA,QAAA,CAAA,aAAA,CAJA;AAKA;;AAEA,cAAA,QAzCA,GAyCA,MAAA,CAAA,QAAA,CAAA,QAzCA,EA0CA;;AACA,mBAAA,GAAA,CAAA,IAAA,aAAA,QAAA,mBAAA,KAAA,QAAA,CAAA,KAAA,cACA,KAAA,QAAA,CAAA,YADA;AA3CA;AAAA,qBA+CA,aAAA,CAAA,OAAA,CAAA,KAAA,GAAA,IAAA,EA/CA;;AAAA;AA+CA,mBAAA,QAAA,CAAA,KA/CA;AAgDA,mBAAA,OAAA;;AAhDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAkDA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,MAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,IAAA,CAAA,KADA;AAEA,UAAA,YAAA,EAAA,KAAA;AAFA;AAFA,OAAA;AAOA,KATA;AAUA,IAAA,eAVA,6BAUA;AACA,WAAA,aAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,cAAA;AACA,WAAA,KAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,KAAA;AACA,KAbA;AAcA;AACA;AACA;AACA;AACA;AACA,IAAA,OAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA,gBAAA,aApBA,GAoBA,KApBA;;AAqBA,oBAAA,KAAA,QAAA,CAAA,KAAA,KAAA,EAAA,EAAA;AACA,kBAAA,aAAA,GAAA,IAAA;AACA;;AAEA,oBAAA,aAAA,EAAA;AACA,sBAAA,iBAAA,CAAA,cAAA,CAAA,KAAA,QAAA,CAAA,KAAA,CAAA,EAAA;AACA,oBAAA,aAAA,GAAA,IAAA;AACA,mBAFA,MAEA;AACA,oBAAA,aAAA,GAAA,KAAA;AACA;AACA;;AA/BA,qBAiCA,aAjCA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAkCA,aAAA,CAAA,OAAA,CACA,OADA,CACA,KAAA,QAAA,CAAA,KADA,EAEA,IAFA,EAlCA;;AAAA;AAkCA,gBAAA,CAlCA;AAsCA,qBAAA,QAAA,CAAA,IAAA,GAAA,CAAA,CAAA,CAAA,CAAA;;AAtCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAlDA,CAAA","sourcesContent":["<template>\n  <div class=\"row\">\n    <Header></Header>\n    <div class=\"container\">\n      <div class=\"card\">\n        <div class=\"card-content flow-text\">\n          <p>\n            Your note has been encrypted and\n            <a\n              :href=\"`${url.etherscan}`\"\n              target=\"_blank\"\n            >posted on the blockchain</a>. Only someone with the secret key can retrieve your note.\n          </p>\n          <blockquote class=\"truncate\">\n            <strong>Encrypted Note:</strong>\n            {{ contract.note }}\n          </blockquote>\n        </div>\n        <div class=\"card-action flow-text\">\n          <div class=\"secret-key-desc\">\n            Secret Key:\n            <span class=\"secret-key\">{{ contract.secretKey }}</span>\n          </div>\n          <router-link\n            class=\"truncate\"\n            :to=\"{ name: 'Note', params: { token: contract.token, whichNetwork: contract.whichNetwork } }\"\n          >{{ url.note }}</router-link>\n        </div>\n      </div>\n      <!-- <button @click.prevent=\"getTransactionReceipt\">Get Transaction Details</button> -->\n    </div>\n  </div>\n</template>\n<script>\nimport Header from \"./Header.vue\";\nimport commonHelpers from \"@/helpers/common\";\nimport blockchainHelpers from \"@/helpers/blockchain\";\n\nimport web3 from \"./../web3\";\nimport notesContract from \"./../notes\";\n\nexport default {\n  name: \"TransactionDetails\",\n  data() {\n    return {\n      url: {\n        etherscan: \"\",\n        note: \"\"\n      },\n      contract: {\n        transactionID: this.$route.params.transaction_id,\n        token: this.$route.params.token,\n        secretKey: this.$route.params.secretKey,\n        whichNetwork: this.$route.params.whichNetwork,\n        note: \"\"\n      }\n    };\n  },\n  components: {\n    Header\n  },\n  watch: {\n    $route: \"updateURLParams\"\n  },\n  async created() {\n    if (typeof this.contract.secretKey === \"undefined\") {\n      this.$router.push({\n        name: \"TextForm\"\n      });\n    }\n\n    if (this.contract.whichNetwork === \"mainnet\") {\n      this.url.etherscan =\n        \"https://etherscan.io/tx/\" + String(this.contract.transactionID);\n    } else {\n      this.url.etherscan =\n        \"https://\" +\n        this.contract.whichNetwork +\n        \".etherscan.io/tx/\" +\n        String(this.contract.transactionID);\n    }\n\n    const hostName = window.location.hostname;\n    // https://till-death-do-us-part.firebaseapp.com\n    this.url.note = `${hostName}/note/${this.contract.token}/${\n      this.contract.whichNetwork\n    }`;\n\n    this.contract.owner = await notesContract.methods.owner().call();\n    this.getNote();\n  },\n  methods: {\n    visitNotePage() {\n      this.$router.push({\n        name: \"Note\",\n        params: {\n          token: this.form.token,\n          whichNetwork: this.whichNetwork\n        }\n      });\n    },\n    updateURLParams() {\n      this.transactionID = this.$route.params.transaction_id;\n      this.token = this.$route.params.token;\n    },\n    // async getTransactionReceipt() {\n    //   const trans = await web3.eth.getTransactionReceipt(\n    //     this.contract.transactionID\n    //   );\n    // },\n    async getNote() {\n      let shouldGetNote = false;\n      if (this.contract.token !== \"\") {\n        shouldGetNote = true;\n      }\n\n      if (shouldGetNote) {\n        if (blockchainHelpers.doesTokenExist(this.contract.token)) {\n          shouldGetNote = true;\n        } else {\n          shouldGetNote = false;\n        }\n      }\n\n      if (shouldGetNote) {\n        const c = await notesContract.methods\n          .getNote(this.contract.token)\n          .call();\n\n        this.contract.note = c[1];\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.card-action a {\n  text-transform: lowercase !important;\n  padding: 5px;\n  border-radius: 3px;\n}\n.secret-key-desc {\n  color: #2bbbad;\n  font-size: 32px;\n  padding: 0 20px 20px 20px;\n}\n.secret-key {\n  color: #26a69a;\n}\n</style>\n"],"sourceRoot":"src/components"}]}